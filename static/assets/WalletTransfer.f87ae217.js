import{_ as O,a as y,D as x,v as N,s as Q,m as V,e as o,E as p,f as u,o as m,d as s,c as U,x as D,F as E,A as v,j as F,t as b,z as R,i as K,h as X,u as Y,p as Z,k as $,b as w}from"./index.2f24064d.js";import{a as ee,d as le}from"./wallet.49f100df.js";import{c as ae}from"./coin.cb3c48a8.js";import"./request.019d1f39.js";const h=g=>(Z("data-v-dcc693ff"),g=g(),$(),g),te=h(()=>w("h1",{class:"title"},"WalletTransfer",-1)),ne=h(()=>w("h5",{class:"description"},"Personal wallet transactions",-1)),oe=h(()=>w("label",null,"Amount",-1)),se=h(()=>w("label",null," From ",-1)),re=h(()=>w("label",null,"To",-1)),ce={__name:"WalletTransfer",setup(g){const M=Y(),_=y([]),r=y(0),c=y([]),i=y(),f=y(),S=x(()=>{var l,t;const e=(l=c.value.find(n=>n.id===i.value))==null?void 0:l.coin_id;return(t=_.value.find(n=>n.id===e))==null?void 0:t.name}),W=x(()=>{var l,t;const e=(l=c.value.find(n=>n.id===f.value))==null?void 0:l.coin_id;return(t=_.value.find(n=>n.id===e))==null?void 0:t.name}),I=x(()=>{var l,t;const e=(l=c.value.find(n=>n.id===i.value))==null?void 0:l.coin_id;return((t=_.value.find(n=>n.id===e))==null?void 0:t.rate)*r.value}),P=x(()=>{var l,t;const e=(l=c.value.find(n=>n.id===f.value))==null?void 0:l.coin_id;return I.value/((t=_.value.find(n=>n.id===e))==null?void 0:t.rate)});N(r,()=>{var e,l;r.value>((e=c.value.find(t=>t.id===i.value))==null?void 0:e.balance)&&(r.value=(l=c.value.find(t=>t.id===i.value))==null?void 0:l.balance)}),N(i,()=>{r.value=0});const z=async()=>{let e=await ae();e.code===200?_.value=e.data:p.error("Get coin list failed, please try again!")},A=async()=>{const e=await ee({user_id:M.state.user.id,page:1,page_size:100});e.code===200?c.value=e.data.list:p.error("Get user wallet list failed, please try again!")},L=async()=>{const e={amount:r.value,from_wallet_id:i.value,to_wallet_id:f.value};if(e.amount<=0){p.error("Please enter the correct amount!");return}if(e.from_wallet_id===e.to_wallet_id){p.error("Please select different currencies!");return}(await le(e)).code===200?(r.value=0,i.value="",f.value="",p.success("Transfer successful!")):p.error("Create wallet failed, please try again!")};return Q(()=>{z(),A()}),(e,l)=>{const t=u("el-header"),n=u("el-input"),T=u("el-col"),j=u("el-option"),B=u("el-select"),k=u("el-row"),G=u("el-text"),q=u("el-button"),H=u("el-main"),J=u("el-container");return m(),V(J,null,{default:o(()=>[s(H,null,{default:o(()=>[s(t,null,{default:o(()=>[te,ne]),_:1}),s(k,{type:"flex",justify:"center",gutter:20,class:"el-row-margin"},{default:o(()=>[s(T,{span:4},{default:o(()=>{var a;return[oe,s(n,{controls:!1,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=d=>r.value=d),placeholder:"balance:"+((a=c.value.find(d=>d.id===i.value))==null?void 0:a.balance),tabIndex:"-1"},null,8,["modelValue","placeholder"])]}),_:1}),s(T,{span:4},{default:o(()=>[se,s(B,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=a=>i.value=a),placeholder:"Select Currency",filterable:"",clearable:"",style:{width:"240px"}},{default:o(()=>[(m(!0),U(E,null,D(c.value,a=>{var d;return m(),V(j,{key:a.id,label:a.name+" - "+((d=_.value.find(C=>C.id===a.coin_id))==null?void 0:d.name)+" - (balance:"+a.balance+")",value:a.id},null,8,["label","value"])}),128))]),_:1},8,["modelValue"])]),_:1}),s(T,{span:4},{default:o(()=>[re,s(B,{modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=a=>f.value=a),placeholder:"Select Currency",filterable:"",clearable:"",style:{width:"240px"}},{default:o(()=>[(m(!0),U(E,null,D(c.value,a=>{var d;return m(),V(j,{key:a.id,value:a.id,label:a.name+" - "+((d=_.value.find(C=>C.id===a.coin_id))==null?void 0:d.name)+" - (balance:"+a.balance+")"},null,8,["value","label"])}),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(k,{type:"flex",justify:"center",class:"el-row-top"},{default:o(()=>[r.value&&v(S)&&v(W)?(m(),V(G,{key:0,type:"warning"},{default:o(()=>[F(b(r.value)+" "+b(v(S))+" = "+b(v(I))+"(USD) = "+b(v(P))+" "+b(v(W)),1)]),_:1})):R("",!0)]),_:1}),s(k,{type:"flex",justify:"center",class:"el-row-top"},{default:o(()=>[s(q,{type:"primary",class:"submit-btn",onClick:K(L,["prevent"]),onKeyup:X(K(L,["prevent"]),["enter"])},{default:o(()=>[F(" Transfer ")]),_:1},8,["onClick","onKeyup"])]),_:1})]),_:1})]),_:1})}}},fe=O(ce,[["__scopeId","data-v-dcc693ff"]]);export{fe as default};
