import{_ as O,a as b,D as x,v as N,s as Q,m as V,e as o,E as f,f as c,o as p,d as s,c as U,x as D,F as E,A as m,j as F,t as y,z as R,i as K,h as X,u as Y,p as Z,k as $,b as w}from"./index.1a21de82.js";import{w as ee,d as le}from"./wallet.009374ac.js";import{c as ae}from"./coin.24a09ce5.js";import"./request.58213615.js";const h=g=>(Z("data-v-2eab76b5"),g=g(),$(),g),te=h(()=>w("h1",{class:"title"},"WalletTransfer",-1)),ne=h(()=>w("h5",{class:"description"},"Personal wallet transactions",-1)),oe=h(()=>w("label",null,"Amount",-1)),se=h(()=>w("label",null," From ",-1)),re=h(()=>w("label",null,"To",-1)),ie={__name:"WalletTransfer",setup(g){const M=Y(),_=b([]),r=b(0),i=b([]),u=b(),v=b(),S=x(()=>{var l,t;const e=(l=i.value.find(n=>n.id===u.value))==null?void 0:l.coin_id;return(t=_.value.find(n=>n.id===e))==null?void 0:t.name}),W=x(()=>{var l,t;const e=(l=i.value.find(n=>n.id===v.value))==null?void 0:l.coin_id;return(t=_.value.find(n=>n.id===e))==null?void 0:t.name}),I=x(()=>{var l,t;const e=(l=i.value.find(n=>n.id===u.value))==null?void 0:l.coin_id;return((t=_.value.find(n=>n.id===e))==null?void 0:t.rate)*r.value}),P=x(()=>{var l,t;const e=(l=i.value.find(n=>n.id===v.value))==null?void 0:l.coin_id;return I.value/((t=_.value.find(n=>n.id===e))==null?void 0:t.rate)});N(r,()=>{var e,l;r.value>((e=i.value.find(t=>t.id===u.value))==null?void 0:e.balance)&&(r.value=(l=i.value.find(t=>t.id===u.value))==null?void 0:l.balance)}),N(u,()=>{r.value=0});const z=async()=>{let e=await ae();e.code===200?_.value=e.data:f.error("Get coin list failed, please try again!")},A=async()=>{const e=await ee({user_id:M.state.user.id,page:1,page_size:100});e.code===200?i.value=e.data.list:f.error("Get user wallet list failed, please try again!")},L=async()=>{const e={amount:r.value,from_wallet_id:u.value,to_wallet_id:v.value};if(e.amount<=0){f.error("Please enter the correct amount!");return}if(e.from_wallet_id===e.to_wallet_id){f.error("Please select different currencies!");return}(await le(e)).code===200?f.success("Transfer successful!"):f.error("Create wallet failed, please try again!")};return Q(()=>{z(),A()}),(e,l)=>{const t=c("el-header"),n=c("el-input"),T=c("el-col"),j=c("el-option"),B=c("el-select"),k=c("el-row"),G=c("el-text"),q=c("el-button"),H=c("el-main"),J=c("el-container");return p(),V(J,null,{default:o(()=>[s(H,null,{default:o(()=>[s(t,null,{default:o(()=>[te,ne]),_:1}),s(k,{type:"flex",justify:"center",gutter:20,class:"el-row-margin"},{default:o(()=>[s(T,{span:4},{default:o(()=>{var a;return[oe,s(n,{controls:!1,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=d=>r.value=d),placeholder:"balance:"+((a=i.value.find(d=>d.id===u.value))==null?void 0:a.balance),tabIndex:"-1"},null,8,["modelValue","placeholder"])]}),_:1}),s(T,{span:4},{default:o(()=>[se,s(B,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=a=>u.value=a),placeholder:"Select Currency",filterable:"",clearable:"",style:{width:"240px"}},{default:o(()=>[(p(!0),U(E,null,D(i.value,a=>{var d;return p(),V(j,{key:a.id,label:a.name+" - "+((d=_.value.find(C=>C.id===a.coin_id))==null?void 0:d.name)+" - (balance:"+a.balance+")",value:a.id},null,8,["label","value"])}),128))]),_:1},8,["modelValue"])]),_:1}),s(T,{span:4},{default:o(()=>[re,s(B,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=a=>v.value=a),placeholder:"Select Currency",filterable:"",clearable:"",style:{width:"240px"}},{default:o(()=>[(p(!0),U(E,null,D(i.value,a=>{var d;return p(),V(j,{key:a.id,value:a.id,label:a.name+" - "+((d=_.value.find(C=>C.id===a.coin_id))==null?void 0:d.name)+" - (balance:"+a.balance+")"},null,8,["value","label"])}),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(k,{type:"flex",justify:"center",class:"el-row-top"},{default:o(()=>[r.value&&m(S)&&m(W)?(p(),V(G,{key:0,type:"warning"},{default:o(()=>[F(y(r.value)+" "+y(m(S))+" = "+y(m(I))+"(USD) = "+y(m(P))+" "+y(m(W)),1)]),_:1})):R("",!0)]),_:1}),s(k,{type:"flex",justify:"center",class:"el-row-top"},{default:o(()=>[s(q,{type:"primary",class:"submit-btn",onClick:K(L,["prevent"]),onKeyup:X(K(L,["prevent"]),["enter"])},{default:o(()=>[F(" Transfer ")]),_:1},8,["onClick","onKeyup"])]),_:1})]),_:1})]),_:1})}}},fe=O(ie,[["__scopeId","data-v-2eab76b5"]]);export{fe as default};
