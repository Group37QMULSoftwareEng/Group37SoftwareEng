import{_ as x,a as u,s as S,c as N,b as l,d as n,e as m,F as B,N as U,f as r,o as I,j as v,p as W,k as E,u as F,l as P}from"./index.1a21de82.js";import{a as A}from"./wallet.009374ac.js";import{c as D}from"./coin.24a09ce5.js";import{s}from"./function-call.e575ea11.js";import"./request.58213615.js";const L=c=>(W("data-v-b3fb202c"),c=c(),E(),c),T={class:"container"},j={class:"menu"},z={style:{margin:"16px"}},G={style:{margin:"16px"}},M=L(()=>l("div",{class:"bottom"},null,-1)),R={__name:"CreateWallet",setup(c){const f=F(),g=P(),p=u([]),i=u(!1),a=u({}),y=async()=>{const t=await D();t.code===200?(t.data.map(e=>{e.subname=e.rate+"(USD)"}),p.value=t.data):s({type:"danger",message:"Get coin list failed, please try again!"})},w=()=>{g.go(-1)},b=t=>{a.value.coin_id=t.id,a.value.coin_name=t.name,i.value=!1},h=()=>U("cancel"),C=async()=>{if(!a.value.name){s({type:"danger",message:"Please enter wallet name"});return}if(!a.value.coin_id){s({type:"danger",message:"Please choose a currency"});return}if(!a.value.description){s({type:"danger",message:"Please enter wallet description"});return}let t={user_id:f.state.user.id,name:a.value.name,coin_id:a.value.coin_id,description:a.value.description};const e=await A(t);e.code===200?s({type:"success",message:"Create wallet success!"}):s({type:"danger",message:e.msg})};return S(()=>{y()}),(t,e)=>{const d=r("van-field"),V=r("van-cell-group"),_=r("van-button"),k=r("van-action-sheet");return I(),N(B,null,[l("div",T,[l("div",j,[n(V,null,{default:m(()=>[n(d,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.name=o),label:"Name",placeholder:"Enter wallet name"},null,8,["modelValue"]),n(d,{modelValue:a.value.coin_name,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.coin_name=o),label:"Currency",onClick:e[2]||(e[2]=o=>i.value=!0),placeholder:"Choose a currency"},null,8,["modelValue"]),n(d,{modelValue:a.value.description,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.description=o),rows:"2",autosize:"",label:"Description",type:"textarea",maxlength:"50",placeholder:"Enter wallet description","show-word-limit":""},null,8,["modelValue"])]),_:1}),l("div",z,[n(_,{round:"",block:"",type:"primary","native-type":"submit",onClick:C},{default:m(()=>[v(" Submit ")]),_:1})]),l("div",G,[n(_,{round:"",block:"","native-type":"submit",onClick:w},{default:m(()=>[v(" Back ")]),_:1})])]),M]),n(k,{show:i.value,"onUpdate:show":e[4]||(e[4]=o=>i.value=o),actions:p.value,"cancel-text":"cancel","close-on-click-action":"",onSelect:b,onCancel:h},null,8,["show","actions"])],64)}}},O=x(R,[["__scopeId","data-v-b3fb202c"]]);export{O as default};
